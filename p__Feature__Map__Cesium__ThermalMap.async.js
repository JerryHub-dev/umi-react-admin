"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4748],{82320:function(e,o,n){n.r(o);var t=n(54306),i=n.n(t),r=n(35761),l=n(6540),a=n(50732),s=n(57688),c=n(4872),d=n(74970),u=n(40947),p=n(49283),m=n(76087),f=n(80078),g=n(10655),v=n(3035),b=n(72348),h=n(82106),y=n(4039),Z=n(43290),C=n(30237),x=n(27005),I=n(21186),E=n(17678),S=n(81110),w=n(85831),O=n(76698),$=n(61996),k=(n(33507),n(93236)),D=n(62086);o.default=function(){var e=(0,k.useState)(null),o=i()(e,2),t=o[0],N=o[1],j=s.ZP.useMessage(),L=i()(j,2),M=L[0],T=L[1],B=(0,k.useState)([]),P=i()(B,2),A=P[0],z=P[1];p.Z.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkZjBmZTAzMS1jMTJkLTQ5OGQtYTkyYS0xODcyMjU3MTQzMmUiLCJpZCI6MTg2MDcxLCJpYXQiOjE3MDM0MDIwMzl9.DQzBf8T_0U92DwjBcYQqdgwhFs-Cx7EacplwoL_ypjY",(0,k.useEffect)((function(){var e=new m.Z("cesiumContainer",{animation:!1,baseLayerPicker:!1,infoBox:!1,sceneModePicker:!0,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,shouldAnimate:!0,skyAtmosphere:!1,skyBox:!1,vrButton:!1});e.cesiumWidget.creditContainer.style.display="none";var o={destination:f.Z.fromDegrees(116.3974,39.9093,15e6)};e.camera.flyTo(o);var n=JSON.parse(JSON.stringify(r)).coverageData.arrayResult;return z(n),e.screenSpaceEventHandler.setInputAction((function(o){var n=e.camera.pickEllipsoid(o.position,e.scene.globe.ellipsoid);if(n){var t=g.Z.fromCartesian(n),i=v.Z.toDegrees(t.longitude).toFixed(2),r=v.Z.toDegrees(t.latitude).toFixed(2);M.info("Longitude: ".concat(i,", Latitude: ").concat(r))}}),b.Z.LEFT_CLICK),N(e),setTimeout((function(){Y(e),Q(e)}),100),function(){e.destroy()}}),[]);var H=(0,k.useState)(!1),R=i()(H,2),_=R[0],U=R[1],W=(0,k.useState)({}),J=i()(W,2),F=J[0],G=J[1],Q=function(e){var o=new h.Z(e.scene.canvas);o.setInputAction((function(o){var n=e.scene.pick(o.position);if(y.Z(n)){var t={x:o.position.x,y:o.position.y};if(!n.id||!n.id.label)return;var i=n.id.position,r=e.scene.globe.ellipsoid.cartesianToCartographic(i._value),l=v.Z.toDegrees(r.longitude),a=v.Z.toDegrees(r.latitude);console.log(l,a),G(t),U(!0)}}),b.Z.LEFT_CLICK);var n=null;o.setInputAction((function(o){var t=e.scene.pick(o.endPosition);y.Z(t)&&t.id&&t.id.label&&t.id.properties&&(t.id.label.text="更新后的标签"+t.id.properties.text._value,n=t.id),y.Z(t)&&t.id||n&&(n.label.text=n.properties.text._value,n=null)}),b.Z.MOUSE_MOVE)},Y=function(e){l.HR.forEach((function(o){e.entities.add({position:f.Z.fromDegrees(o.longitude,o.latitude),id:o.id,billboard:{image:n(15338),scale:.3},label:{text:o.label,font:"14px sans-serif",backgroundColor:Z.Z.fromCssColorString("#0094ff"),showBackground:!0,style:C.Z.FILL_AND_OUTLINE,fillColor:Z.Z.WHITE,outlineColor:Z.Z.BLACK,outlineWidth:2,horizontalOrigin:x.Z.CENTER,verticalOrigin:I.Z.BOTTOM,pixelOffset:new E.Z(0,55),pixelOffsetScaleByDistance:new S.Z(150,1.5,8e6,.5)}}).properties={text:o.label}}))},V=function(){U(!1);var e=JSON.parse(JSON.stringify(r));console.log(e),console.log(e.coverageData.arrayResult);var o=106.65,i=29.69;t.entities.add({position:f.Z.fromDegrees(o,i),billboard:{image:n(15338),scale:.3}});var l=function(e,o){o=o||"";for(var n=atob(e.split(",")[1]),t=[],i=0;i<n.length;i+=1024){for(var r=n.slice(i,i+1024),l=new Array(r.length),a=0;a<r.length;a++)l[a]=r.charCodeAt(a);var s=new Uint8Array(l);t.push(s)}return new Blob(t,{type:o})}("data:image/png;base64,"+e.diagramPngStream,"image/png"),a=URL.createObjectURL(l),s=new Image;s.src=a,s.onload=function(){var e=t.entities.add({name:"Heatmap",rectangle:{coordinates:w.Z.fromDegrees(o-.1,29.59,106.75,i+.1),material:new O.Z({image:s,transparent:!0})}});t.zoomTo(e)}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(c.Z,{message:"热力图",type:"success",showIcon:!0,className:"mb-2"}),(0,D.jsxs)(a.Z,{children:[T,(0,D.jsx)(d.ZP,{className:"mb-2",onClick:function(){return function(){var e=l.HR[0],o=l.HR[1];t.entities.add({polyline:{positions:f.Z.fromDegreesArray([e.longitude,e.latitude,o.longitude,o.latitude]),width:3,material:Z.Z.RED}});var n=f.Z.distance(f.Z.fromDegrees(e.longitude,e.latitude),f.Z.fromDegrees(o.longitude,o.latitude));t.entities.add({position:f.Z.fromDegrees(e.longitude,e.latitude),label:{text:"距离：".concat(n.toFixed(2)," 米"),font:"14px sans-serif",backgroundColor:Z.Z.fromCssColorString("#0094ff"),showBackground:!0,style:C.Z.FILL_AND_OUTLINE,fillColor:Z.Z.WHITE,outlineColor:Z.Z.BLACK,outlineWidth:2,horizontalOrigin:x.Z.CENTER,verticalOrigin:I.Z.BOTTOM,pixelOffset:new E.Z(0,-55),pixelOffsetScaleByDistance:new S.Z(150,1.5,8e6,.5)}})}()},children:"距离计算"}),(0,D.jsx)(d.ZP,{className:"mb-2 ml-2",onClick:function(){return V()},children:"渲染热力图数据 base64"}),(0,D.jsx)(d.ZP,{className:"mb-2 ml-2",onClick:function(){return function(){A.flat().forEach((function(e){var o;t.entities.cluster={enabled:!0,pixelRange:50,minimumClusterSize:10,clusterBillboards:!0,clusterLabels:!0,clusterPoints:!0},t.entities.add({position:f.Z.fromDegrees(e.longitude,e.latitude),name:e.fieldStrength,point:{pixelSize:5,color:(o=e.fieldStrength,o<=25?Z.Z.BLUE.withAlpha(.5):o<=40?Z.Z.GREEN.withAlpha(.5):o<=75?Z.Z.YELLOW.withAlpha(.5):Z.Z.RED.withAlpha(.5)),heightReference:$.Z.CLAMP_TO_GROUND}}).properties={fieldStrength:e.fieldStrength}}));var e=document.createElement("div");document.body.appendChild(e),e.style.position="absolute",e.style.background="white",e.style.padding="5px",e.style.display="none",t.screenSpaceEventHandler.setInputAction((function(o){var n=t.scene.pick(o.endPosition);if(y.Z(n)&&y.Z(n.id)&&n.id.properties.fieldStrength){var i=n.id.name;e.style.display="block",e.style.left=o.endPosition.x+10+"px",e.style.top=o.endPosition.y+10+"px",e.textContent=i}else e.style.display="none"}),b.Z.MOUSE_MOVE),t.zoomTo(t.entities)}()},children:"渲染点云效果"}),(0,D.jsx)(d.ZP,{className:"mb-2 ml-2",onClick:function(){return t.dataSources.removeAll(),void t.entities.removeAll()},children:"清除地图数据"}),(0,D.jsx)("div",{id:"cesiumContainer"}),(0,D.jsx)(u.Z,{title:"",open:_,style:{top:F.y+100,left:F.x-300},onCancel:function(){return U(!1)},footer:null,width:300,children:(0,D.jsx)(d.ZP,{onClick:function(){return V()},children:"渲染热力图数据"})})]})]})}},4872:function(e,o,n){n.d(o,{Z:function(){return P}});var t=n(93236),i=n(17608),r=n(57511),l=n(13246),a=n(13185),s=n(39340),c=n(82187),d=n.n(c),u=n(76631),p=n(48137),m=n(6553),f=n(82871),g=n(21720),v=n(35521),b=n(22892),h=n(66537);const y=(e,o,n,t,i)=>({background:e,border:`${(0,v.bf)(t.lineWidth)} ${t.lineType} ${o}`,[`${i}-icon`]:{color:n}}),Z=e=>{const{componentCls:o,motionDurationSlow:n,marginXS:t,marginSM:i,fontSize:r,fontSizeLG:l,lineHeight:a,borderRadiusLG:s,motionEaseInOutCirc:c,withDescriptionIconSize:d,colorText:u,colorTextHeading:p,withDescriptionPadding:m,defaultPadding:f}=e;return{[o]:Object.assign(Object.assign({},(0,b.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:f,wordWrap:"break-word",borderRadius:s,[`&${o}-rtl`]:{direction:"rtl"},[`${o}-content`]:{flex:1,minWidth:0},[`${o}-icon`]:{marginInlineEnd:t,lineHeight:0},"&-description":{display:"none",fontSize:r,lineHeight:a},"&-message":{color:p},[`&${o}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${c}, opacity ${n} ${c},\n        padding-top ${n} ${c}, padding-bottom ${n} ${c},\n        margin-bottom ${n} ${c}`},[`&${o}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${o}-with-description`]:{alignItems:"flex-start",padding:m,[`${o}-icon`]:{marginInlineEnd:i,fontSize:d,lineHeight:0},[`${o}-message`]:{display:"block",marginBottom:t,color:p,fontSize:l},[`${o}-description`]:{display:"block",color:u}},[`${o}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},C=e=>{const{componentCls:o,colorSuccess:n,colorSuccessBorder:t,colorSuccessBg:i,colorWarning:r,colorWarningBorder:l,colorWarningBg:a,colorError:s,colorErrorBorder:c,colorErrorBg:d,colorInfo:u,colorInfoBorder:p,colorInfoBg:m}=e;return{[o]:{"&-success":y(i,t,n,e,o),"&-info":y(m,p,u,e,o),"&-warning":y(a,l,r,e,o),"&-error":Object.assign(Object.assign({},y(d,c,s,e,o)),{[`${o}-description > pre`]:{margin:0,padding:0}})}}},x=e=>{const{componentCls:o,iconCls:n,motionDurationMid:t,marginXS:i,fontSizeIcon:r,colorIcon:l,colorIconHover:a}=e;return{[o]:{"&-action":{marginInlineStart:i},[`${o}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:r,lineHeight:(0,v.bf)(r),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:l,transition:`color ${t}`,"&:hover":{color:a}}},"&-close-text":{color:l,transition:`color ${t}`,"&:hover":{color:a}}}}};var I=(0,h.I$)("Alert",(e=>[Z(e),C(e),x(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}))),E=function(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)o.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]])}return n};const S={success:i.Z,info:s.Z,error:r.Z,warning:a.Z},w=e=>{const{icon:o,prefixCls:n,type:i}=e,r=S[i]||null;return o?(0,f.wm)(o,t.createElement("span",{className:`${n}-icon`},o),(()=>({className:d()(`${n}-icon`,{[o.props.className]:o.props.className})}))):t.createElement(r,{className:`${n}-icon`})},O=e=>{const{isClosable:o,prefixCls:n,closeIcon:i,handleClose:r,ariaProps:a}=e,s=!0===i||void 0===i?t.createElement(l.Z,null):i;return o?t.createElement("button",Object.assign({type:"button",onClick:r,className:`${n}-close-icon`,tabIndex:0},a),s):null},$=t.forwardRef(((e,o)=>{const{description:n,prefixCls:i,message:r,banner:l,className:a,rootClassName:s,style:c,onMouseEnter:f,onMouseLeave:v,onClick:b,afterClose:h,showIcon:y,closable:Z,closeText:C,closeIcon:x,action:S,id:$}=e,k=E(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[D,N]=t.useState(!1);const j=t.useRef(null);t.useImperativeHandle(o,(()=>({nativeElement:j.current})));const{getPrefixCls:L,direction:M,alert:T}=t.useContext(g.E_),B=L("alert",i),[P,A,z]=I(B),H=o=>{var n;N(!0),null===(n=e.onClose)||void 0===n||n.call(e,o)},R=t.useMemo((()=>void 0!==e.type?e.type:l?"warning":"info"),[e.type,l]),_=t.useMemo((()=>!("object"!=typeof Z||!Z.closeIcon)||(!!C||("boolean"==typeof Z?Z:!1!==x&&null!=x||!!(null==T?void 0:T.closable)))),[C,x,Z,null==T?void 0:T.closable]),U=!(!l||void 0!==y)||y,W=d()(B,`${B}-${R}`,{[`${B}-with-description`]:!!n,[`${B}-no-icon`]:!U,[`${B}-banner`]:!!l,[`${B}-rtl`]:"rtl"===M},null==T?void 0:T.className,a,s,z,A),J=(0,m.Z)(k,{aria:!0,data:!0}),F=t.useMemo((()=>{var e,o;return"object"==typeof Z&&Z.closeIcon?Z.closeIcon:C||(void 0!==x?x:"object"==typeof(null==T?void 0:T.closable)&&(null===(e=null==T?void 0:T.closable)||void 0===e?void 0:e.closeIcon)?null===(o=null==T?void 0:T.closable)||void 0===o?void 0:o.closeIcon:null==T?void 0:T.closeIcon)}),[x,Z,C,null==T?void 0:T.closeIcon]),G=t.useMemo((()=>{const e=null!=Z?Z:null==T?void 0:T.closable;if("object"==typeof e){const{closeIcon:o}=e;return E(e,["closeIcon"])}return{}}),[Z,null==T?void 0:T.closable]);return P(t.createElement(u.ZP,{visible:!D,motionName:`${B}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:h},((o,i)=>{let{className:l,style:a}=o;return t.createElement("div",Object.assign({id:$,ref:(0,p.sQ)(j,i),"data-show":!D,className:d()(W,l),style:Object.assign(Object.assign(Object.assign({},null==T?void 0:T.style),c),a),onMouseEnter:f,onMouseLeave:v,onClick:b,role:"alert"},J),U?t.createElement(w,{description:n,icon:e.icon,prefixCls:B,type:R}):null,t.createElement("div",{className:`${B}-content`},r?t.createElement("div",{className:`${B}-message`},r):null,n?t.createElement("div",{className:`${B}-description`},n):null),S?t.createElement("div",{className:`${B}-action`},S):null,t.createElement(O,{isClosable:_,prefixCls:B,closeIcon:F,handleClose:H,ariaProps:G}))})))}));var k=$,D=n(68190),N=n(90396),j=n(25525),L=n(63089);let M=function(e){function o(){var e;return(0,D.Z)(this,o),(e=(0,j.Z)(this,o,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,L.Z)(o,e),(0,N.Z)(o,[{key:"componentDidCatch",value:function(e,o){this.setState({error:e,info:o})}},{key:"render",value:function(){const{message:e,description:o,id:n,children:i}=this.props,{error:r,info:l}=this.state,a=l&&l.componentStack?l.componentStack:null,s=void 0===e?(r||"").toString():e,c=void 0===o?a:o;return r?t.createElement(k,{id:n,type:"error",message:s,description:t.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},c)}):i}}])}(t.Component);var T=M;const B=k;B.ErrorBoundary=T;var P=B}}]);