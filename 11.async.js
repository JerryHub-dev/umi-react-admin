(self.webpackChunk=self.webpackChunk||[]).push([[11],{4872:function(t,e,i){"use strict";i.d(e,{Z:function(){return A}});var a=i(93236),n=i(17608),r=i(57511),s=i(60583),o=i(13185),h=i(39340),l=i(82187),d=i.n(l),u=i(76631),c=i(48137),m=i(6553),_=i(82871),g=i(21720),f=i(35521),p=i(22892),v=i(66537);const y=(t,e,i,a,n)=>({background:t,border:`${(0,f.bf)(a.lineWidth)} ${a.lineType} ${e}`,[`${n}-icon`]:{color:i}}),x=t=>{const{componentCls:e,motionDurationSlow:i,marginXS:a,marginSM:n,fontSize:r,fontSizeLG:s,lineHeight:o,borderRadiusLG:h,motionEaseInOutCirc:l,withDescriptionIconSize:d,colorText:u,colorTextHeading:c,withDescriptionPadding:m,defaultPadding:_}=t;return{[e]:Object.assign(Object.assign({},(0,p.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:_,wordWrap:"break-word",borderRadius:h,[`&${e}-rtl`]:{direction:"rtl"},[`${e}-content`]:{flex:1,minWidth:0},[`${e}-icon`]:{marginInlineEnd:a,lineHeight:0},"&-description":{display:"none",fontSize:r,lineHeight:o},"&-message":{color:c},[`&${e}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${i} ${l}, opacity ${i} ${l},\n        padding-top ${i} ${l}, padding-bottom ${i} ${l},\n        margin-bottom ${i} ${l}`},[`&${e}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${e}-with-description`]:{alignItems:"flex-start",padding:m,[`${e}-icon`]:{marginInlineEnd:n,fontSize:d,lineHeight:0},[`${e}-message`]:{display:"block",marginBottom:a,color:c,fontSize:s},[`${e}-description`]:{display:"block",color:u}},[`${e}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},C=t=>{const{componentCls:e,colorSuccess:i,colorSuccessBorder:a,colorSuccessBg:n,colorWarning:r,colorWarningBorder:s,colorWarningBg:o,colorError:h,colorErrorBorder:l,colorErrorBg:d,colorInfo:u,colorInfoBorder:c,colorInfoBg:m}=t;return{[e]:{"&-success":y(n,a,i,t,e),"&-info":y(m,c,u,t,e),"&-warning":y(o,s,r,t,e),"&-error":Object.assign(Object.assign({},y(d,l,h,t,e)),{[`${e}-description > pre`]:{margin:0,padding:0}})}}},w=t=>{const{componentCls:e,iconCls:i,motionDurationMid:a,marginXS:n,fontSizeIcon:r,colorIcon:s,colorIconHover:o}=t;return{[e]:{"&-action":{marginInlineStart:n},[`${e}-close-icon`]:{marginInlineStart:n,padding:0,overflow:"hidden",fontSize:r,lineHeight:(0,f.bf)(r),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${i}-close`]:{color:s,transition:`color ${a}`,"&:hover":{color:o}}},"&-close-text":{color:s,transition:`color ${a}`,"&:hover":{color:o}}}}};var b=(0,v.I$)("Alert",(t=>[x(t),C(t),w(t)]),(t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}))),D=function(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(i[a[n]]=t[a[n]])}return i};const S={success:n.Z,info:h.Z,error:r.Z,warning:o.Z},I=t=>{const{icon:e,prefixCls:i,type:n}=t,r=S[n]||null;return e?(0,_.wm)(e,a.createElement("span",{className:`${i}-icon`},e),(()=>({className:d()(`${i}-icon`,{[e.props.className]:e.props.className})}))):a.createElement(r,{className:`${i}-icon`})},M=t=>{const{isClosable:e,prefixCls:i,closeIcon:n,handleClose:r,ariaProps:o}=t,h=!0===n||void 0===n?a.createElement(s.Z,null):n;return e?a.createElement("button",Object.assign({type:"button",onClick:r,className:`${i}-close-icon`,tabIndex:0},o),h):null},O=a.forwardRef(((t,e)=>{const{description:i,prefixCls:n,message:r,banner:s,className:o,rootClassName:h,style:l,onMouseEnter:_,onMouseLeave:f,onClick:p,afterClose:v,showIcon:y,closable:x,closeText:C,closeIcon:w,action:S,id:O}=t,E=D(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[B,H]=a.useState(!1);const $=a.useRef(null);a.useImperativeHandle(e,(()=>({nativeElement:$.current})));const{getPrefixCls:z,direction:R,alert:P}=a.useContext(g.E_),F=z("alert",n),[A,j,k]=b(F),G=e=>{var i;H(!0),null===(i=t.onClose)||void 0===i||i.call(t,e)},L=a.useMemo((()=>void 0!==t.type?t.type:s?"warning":"info"),[t.type,s]),N=a.useMemo((()=>!("object"!=typeof x||!x.closeIcon)||(!!C||("boolean"==typeof x?x:!1!==w&&null!=w||!!(null==P?void 0:P.closable)))),[C,w,x,null==P?void 0:P.closable]),T=!(!s||void 0!==y)||y,V=d()(F,`${F}-${L}`,{[`${F}-with-description`]:!!i,[`${F}-no-icon`]:!T,[`${F}-banner`]:!!s,[`${F}-rtl`]:"rtl"===R},null==P?void 0:P.className,o,h,k,j),W=(0,m.Z)(E,{aria:!0,data:!0}),Z=a.useMemo((()=>{var t,e;return"object"==typeof x&&x.closeIcon?x.closeIcon:C||(void 0!==w?w:"object"==typeof(null==P?void 0:P.closable)&&(null===(t=null==P?void 0:P.closable)||void 0===t?void 0:t.closeIcon)?null===(e=null==P?void 0:P.closable)||void 0===e?void 0:e.closeIcon:null==P?void 0:P.closeIcon)}),[w,x,C,null==P?void 0:P.closeIcon]),U=a.useMemo((()=>{const t=null!=x?x:null==P?void 0:P.closable;if("object"==typeof t){const{closeIcon:e}=t;return D(t,["closeIcon"])}return{}}),[x,null==P?void 0:P.closable]);return A(a.createElement(u.ZP,{visible:!B,motionName:`${F}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:t=>({maxHeight:t.offsetHeight}),onLeaveEnd:v},((e,n)=>{let{className:s,style:o}=e;return a.createElement("div",Object.assign({id:O,ref:(0,c.sQ)($,n),"data-show":!B,className:d()(V,s),style:Object.assign(Object.assign(Object.assign({},null==P?void 0:P.style),l),o),onMouseEnter:_,onMouseLeave:f,onClick:p,role:"alert"},W),T?a.createElement(I,{description:i,icon:t.icon,prefixCls:F,type:L}):null,a.createElement("div",{className:`${F}-content`},r?a.createElement("div",{className:`${F}-message`},r):null,i?a.createElement("div",{className:`${F}-description`},i):null),S?a.createElement("div",{className:`${F}-action`},S):null,a.createElement(M,{isClosable:N,prefixCls:F,closeIcon:Z,handleClose:G,ariaProps:U}))})))}));var E=O,B=i(68190),H=i(90396),$=i(25525),z=i(63089);let R=function(t){function e(){var t;return(0,B.Z)(this,e),(t=(0,$.Z)(this,e,arguments)).state={error:void 0,info:{componentStack:""}},t}return(0,z.Z)(e,t),(0,H.Z)(e,[{key:"componentDidCatch",value:function(t,e){this.setState({error:t,info:e})}},{key:"render",value:function(){const{message:t,description:e,id:i,children:n}=this.props,{error:r,info:s}=this.state,o=s&&s.componentStack?s.componentStack:null,h=void 0===t?(r||"").toString():t,l=void 0===e?o:e;return r?a.createElement(E,{id:i,type:"error",message:h,description:a.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},l)}):n}}])}(a.Component);var P=R;const F=E;F.ErrorBoundary=P;var A=F},97622:function(t,e,i){var a,n,r;function s(t,e,i){if(!e)return null;i||(i={}),this._cesium=t,this._options=i,this._id=CesiumHeatmap._getID(),this._options.gradient=this._options.gradient?this._options.gradient:CesiumHeatmap.defaults.gradient,this._options.maxOpacity=this._options.maxOpacity?this._options.maxOpacity:CesiumHeatmap.defaults.maxOpacity,this._options.minOpacity=this._options.minOpacity?this._options.minOpacity:CesiumHeatmap.defaults.minOpacity,this._options.blur=this._options.blur?this._options.blur:CesiumHeatmap.defaults.blur,this._mbounds=CesiumHeatmap.wgs84ToMercatorBB(e),this._setWidthAndHeight(this._mbounds),this._options.radius=Math.round(this._options.radius?this._options.radius:this.width>this.height?this.width/CesiumHeatmap.defaults.radiusFactor:this.height/CesiumHeatmap.defaults.radiusFactor),this._spacing=this._options.radius*CesiumHeatmap.defaults.spacingFactor,this._xoffset=this._mbounds.west,this._yoffset=this._mbounds.south,this.width=Math.round(this.width+2*this._spacing),this.height=Math.round(this.height+2*this._spacing),this._mbounds.west-=this._spacing*this._factor,this._mbounds.east+=this._spacing*this._factor,this._mbounds.south-=this._spacing*this._factor,this._mbounds.north+=this._spacing*this._factor,this.bounds=CesiumHeatmap.mercatorToWgs84BB(this._mbounds),this._rectangle=Cesium.Rectangle.fromDegrees(this.bounds.west,this.bounds.south,this.bounds.east,this.bounds.north),this._container=CesiumHeatmap._getContainer(this.width,this.height,this._id),this._options.container=this._container,this._heatmap=h337.create(this._options),this._container.children[0].setAttribute("id",this._id+"-hm")}!function(t){"use strict";"undefined"==typeof CesiumHeatmap?t.CesiumHeatmap=function(){var t={defaults:{useEntitiesIfAvailable:!0,minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"}},create:function(t,e,i){return new s(t,e,i)},_getContainer:function(t,e,i){var a=document.createElement("div");return i&&a.setAttribute("id",i),a.setAttribute("style","width: "+t+"px; height: "+e+"px; margin: 0px; display: none;"),document.body.appendChild(a),a},_getImageryProvider:function(t){var e=t._heatmap.getDataURL(),i=new Cesium.SingleTileImageryProvider({url:e,rectangle:t._rectangle});return i._tilingScheme=new Cesium.WebMercatorTilingScheme({rectangleSouthwestInMeters:new Cesium.Cartesian2(t._mbounds.west,t._mbounds.south),rectangleNortheastInMeters:new Cesium.Cartesian2(t._mbounds.east,t._mbounds.north)}),i},_getID:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<(t||8);a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}},e=new Cesium.WebMercatorProjection;return t.wgs84ToMercator=function(t){var i=e.project(Cesium.Cartographic.fromDegrees(t.x,t.y));return{x:i.x,y:i.y}},t.wgs84ToMercatorBB=function(t){var i=e.project(Cesium.Cartographic.fromDegrees(t.west,t.south)),a=e.project(Cesium.Cartographic.fromDegrees(t.east,t.north));return{north:a.y,east:a.x,south:i.y,west:i.x}},t.mercatorToWgs84=function(t){var i=e.unproject(new Cesium.Cartesian3(t.x,t.y));return{x:i.longitude,y:i.latitude}},t.mercatorToWgs84BB=function(t){var i=e.unproject(new Cesium.Cartesian3(t.west,t.south)),a=e.unproject(new Cesium.Cartesian3(t.east,t.north));return{north:this.rad2deg(a.latitude),east:this.rad2deg(a.longitude),south:this.rad2deg(i.latitude),west:this.rad2deg(i.longitude)}},t.deg2rad=function(t){return t*(Math.PI/180)},t.rad2deg=function(t){return t/(Math.PI/180)},t}():console.log("CesiumHeatmap already defined.")}(window),s.prototype.wgs84PointToHeatmapPoint=function(t){return this.mercatorPointToHeatmapPoint(CesiumHeatmap.wgs84ToMercator(t))},s.prototype.mercatorPointToHeatmapPoint=function(t){var e={};return e.x=Math.round((t.x-this._xoffset)/this._factor+this._spacing),e.y=Math.round((t.y-this._yoffset)/this._factor+this._spacing),e.y=this.height-e.y,e},s.prototype._setWidthAndHeight=function(t){this.width=t.east>0&&t.west<0?t.east+Math.abs(t.west):Math.abs(t.east-t.west),this.height=t.north>0&&t.south<0?t.north+Math.abs(t.south):Math.abs(t.north-t.south),this._factor=1,this.width>this.height&&this.width>CesiumHeatmap.defaults.maxCanvasSize?(this._factor=this.width/CesiumHeatmap.defaults.maxCanvasSize,this.height/this._factor<CesiumHeatmap.defaults.minCanvasSize&&(this._factor=this.height/CesiumHeatmap.defaults.minCanvasSize)):this.height>this.width&&this.height>CesiumHeatmap.defaults.maxCanvasSize?(this._factor=this.height/CesiumHeatmap.defaults.maxCanvasSize,this.width/this._factor<CesiumHeatmap.defaults.minCanvasSize&&(this._factor=this.width/CesiumHeatmap.defaults.minCanvasSize)):this.width<this.height&&this.width<CesiumHeatmap.defaults.minCanvasSize?(this._factor=this.width/CesiumHeatmap.defaults.minCanvasSize,this.height/this._factor>CesiumHeatmap.defaults.maxCanvasSize&&(this._factor=this.height/CesiumHeatmap.defaults.maxCanvasSize)):this.height<this.width&&this.height<CesiumHeatmap.defaults.minCanvasSize&&(this._factor=this.height/CesiumHeatmap.defaults.minCanvasSize,this.width/this._factor>CesiumHeatmap.defaults.maxCanvasSize&&(this._factor=this.width/CesiumHeatmap.defaults.maxCanvasSize)),this.width=this.width/this._factor,this.height=this.height/this._factor},s.prototype.setData=function(t,e,i){return!!(i&&i.length>0&&null!==t&&!1!==t&&null!==e&&!1!==e)&&(this._heatmap.setData({min:t,max:e,data:i}),this.updateLayer(),!0)},s.prototype.setWGS84Data=function(t,e,i){if(i&&i.length>0&&null!==t&&!1!==t&&null!==e&&!1!==e){for(var a=[],n=0;n<i.length;n++){var r=i[n],s=this.wgs84PointToHeatmapPoint(r);(r.value||0===r.value)&&(s.value=r.value),a.push(s)}return this.setData(t,e,a)}return!1},s.prototype.show=function(t){this._layer&&(this._layer.show=t)},s.prototype.updateLayer=function(){CesiumHeatmap.defaults.useEntitiesIfAvailable&&this._cesium.entities?(this._layer&&this._cesium.entities.remove(this._layer),material=new Cesium.ImageMaterialProperty({image:this._heatmap._renderer.canvas}),Cesium.VERSION>="1.21"?material.transparent=!0:Cesium.VERSION>="1.16"&&(material.alpha=.99),this._layer=this._cesium.entities.add({show:!0,rectangle:{coordinates:this._rectangle,material:material}})):(this._layer&&this._cesium.scene.imageryLayers.remove(this._layer),this._layer=this._cesium.scene.imageryLayers.addImageryProvider(CesiumHeatmap._getImageryProvider(this)))},r=function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},e=function(){var e=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},i=t.defaultRadius;return e.prototype={_organiseData:function(t,e){var a=t[this._xField],n=t[this._yField],r=this._radi,s=this._data,o=this._max,h=this._min,l=t[this._valueField]||1,d=t.radius||this._cfgRadius||i;return s[a]||(s[a]=[],r[a]=[]),s[a][n]?s[a][n]+=l:(s[a][n]=l,r[a][n]=d),s[a][n]>o?(e?this.setDataMax(s[a][n]):this._max=s[a][n],!1):{x:a,y:n,value:l,radius:d,min:h,max:o}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var a in e)for(var n in e[a])t.push({x:a,y:n,radius:i[a][n],value:e[a][n]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]})}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var a=0;a<i;a++)this._organiseData(e[a],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e}(),i=function(){var t=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),a=i.getContext("2d");i.width=256,i.height=1;var n=a.createLinearGradient(0,0,256,1);for(var r in e)n.addColorStop(r,e[r]);return a.fillStyle=n,a.fillRect(0,0,256,1),a.getImageData(0,0,256,1).data},e=function(t,e){var i=document.createElement("canvas"),a=i.getContext("2d"),n=t,r=t;if(i.width=i.height=2*t,1==e)a.beginPath(),a.arc(n,r,t,0,2*Math.PI,!1),a.fillStyle="rgba(0,0,0,1)",a.fill();else{var s=a.createRadialGradient(n,r,t*e,n,r,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),a.fillStyle=s,a.fillRect(0,0,2*t,2*t)}return i};function i(e){var i=e.container,a=this.shadowCanvas=document.createElement("canvas"),n=this.canvas=e.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});n.className="heatmap-canvas",this._width=n.width=a.width=+r.width.replace(/px/,""),this._height=n.height=a.height=+r.height.replace(/px/,""),this.shadowCtx=a.getContext("2d"),this.ctx=n.getContext("2d"),n.style.cssText=a.style.cssText="position:absolute;left:0;top:0;",i.style.position="relative",i.appendChild(n),this._palette=t(e),this._templates={},this._setStyles(e)}return i.prototype={renderPartial:function(t){this._drawAlpha(t),this._colorize()},renderAll:function(t){this._clear(),this._drawAlpha(function(t){for(var e=[],i=t.min,a=t.max,n=t.radi,r=(t=t.data,Object.keys(t)),s=r.length;s--;)for(var o=r[s],h=Object.keys(t[o]),l=h.length;l--;){var d=h[l],u=t[o][d],c=n[o][d];e.push({x:o,y:d,value:u,radius:c})}return{min:i,max:a,data:e}}(t)),this._colorize()},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var i=this._min=t.min,a=this._max=t.max,n=(t=t.data||[]).length,r=1-this._blur;n--;){var s,o=t[n],h=o.x,l=o.y,d=o.radius,u=Math.min(o.value,a),c=h-d,m=l-d,_=this.shadowCtx;this._templates[d]?s=this._templates[d]:this._templates[d]=s=e(d,r),_.globalAlpha=(u-i)/(a-i),_.drawImage(s,c,m),c<this._renderBoundaries[0]&&(this._renderBoundaries[0]=c),m<this._renderBoundaries[1]&&(this._renderBoundaries[1]=m),c+2*d>this._renderBoundaries[2]&&(this._renderBoundaries[2]=c+2*d),m+2*d>this._renderBoundaries[3]&&(this._renderBoundaries[3]=m+2*d)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,a=this._renderBoundaries[3]-e,n=this._width,r=this._height,s=this._opacity,o=this._maxOpacity,h=this._minOpacity,l=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+i>n&&(i=n-t),e+a>r&&(a=r-e);for(var d=this.shadowCtx.getImageData(t,e,i,a),u=d.data,c=u.length,m=this._palette,_=3;_<c;_+=4){var g,f=u[_],p=4*f;p&&(g=s>0?s:f<o?f<h?h:f:o,u[_-3]=m[p],u[_-2]=m[p+1],u[_-1]=m[p+2],u[_]=l?m[p+3]:g)}d.data=u,this.ctx.putImageData(d,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],i=this._max,a=this._min;return Math.abs(i-a)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},i}(),a=function(){var e=!1;return"canvas2d"===t.defaultRenderer&&(e=i),e}(),n=function(){for(var t={},e=arguments.length,i=0;i<e;i++){var a=arguments[i];for(var n in a)t[n]=a[n]}return t},r=function(){var i=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,i){var a=this.cStore;a[t]||(a[t]=[]),a[t].push((function(t){return e.call(i,t)}))},emit:function(t,e){var i=this.cStore;if(i[t])for(var a=i[t].length,n=0;n<a;n++)(0,i[t][n])(e)}},t}(),r=function(t){var e=t._renderer,i=t._coordinator,a=t._store;i.on("renderpartial",e.renderPartial,e),i.on("renderall",e.renderAll,e),i.on("extremachange",(function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})})),a.setCoordinator(i)};function s(){var s=this._config=n(t,arguments[0]||{});if(this._coordinator=new i,s.plugin){var o=s.plugin;if(!t.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var h=t.plugins[o];this._renderer=new h.renderer(s),this._store=new h.store(s)}else this._renderer=new a(s),this._store=new e(s);r(this)}return s.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=n(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},s}(),s={create:function(t){return new r(t)},register:function(e,i){t.plugins[e]=i}};return s},t.exports?t.exports=r():void 0===(n="function"==typeof(a=r)?a.call(e,i,e,t):a)||(t.exports=n)},56732:function(t,e,i){var a,n,r;r=function(){var t,e={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function(){var t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},i=e.defaultRadius;return t.prototype={_organiseData:function(t,e){var a=t[this._xField],n=t[this._yField],r=this._radi,s=this._data,o=this._max,h=this._min,l=t[this._valueField]||1,d=t.radius||this._cfgRadius||i;s[a]||(s[a]=[],r[a]=[]),s[a][n]?s[a][n]+=l:(s[a][n]=l,r[a][n]=d);var u=s[a][n];return u>o?(e?this.setDataMax(u):this._max=u,!1):u<h?(e?this.setDataMin(u):this._min=u,!1):{x:a,y:n,value:l,radius:d,min:h,max:o}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var a in e)for(var n in e[a])t.push({x:a,y:n,radius:i[a][n],value:e[a][n]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&(0===this._data.length&&(this._min=this._max=i.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]}))}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var a=0;a<i;a++)this._organiseData(e[a],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t}(),a=function(){var t=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),a=i.getContext("2d");i.width=256,i.height=1;var n=a.createLinearGradient(0,0,256,1);for(var r in e)n.addColorStop(r,e[r]);return a.fillStyle=n,a.fillRect(0,0,256,1),a.getImageData(0,0,256,1).data},e=function(t,e){var i=document.createElement("canvas"),a=i.getContext("2d"),n=t,r=t;if(i.width=i.height=2*t,1==e)a.beginPath(),a.arc(n,r,t,0,2*Math.PI,!1),a.fillStyle="rgba(0,0,0,1)",a.fill();else{var s=a.createRadialGradient(n,r,t*e,n,r,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),a.fillStyle=s,a.fillRect(0,0,2*t,2*t)}return i};function i(e){var i=e.container,a=this.shadowCanvas=document.createElement("canvas"),n=this.canvas=e.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});n.className="heatmap-canvas",this._width=n.width=a.width=e.width||+r.width.replace(/px/,""),this._height=n.height=a.height=e.height||+r.height.replace(/px/,""),this.shadowCtx=a.getContext("2d"),this.ctx=n.getContext("2d"),n.style.cssText=a.style.cssText="position:absolute;left:0;top:0;",i.style.position="relative",i.appendChild(n),this._palette=t(e),this._templates={},this._setStyles(e)}return i.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(function(t){for(var e=[],i=t.min,a=t.max,n=t.radi,r=(t=t.data,Object.keys(t)),s=r.length;s--;)for(var o=r[s],h=Object.keys(t[o]),l=h.length;l--;){var d=h[l],u=t[o][d],c=n[o][d];e.push({x:o,y:d,value:u,radius:c})}return{min:i,max:a,data:e}}(t)),this._colorize())},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var i=this._min=t.min,a=this._max=t.max,n=(t=t.data||[]).length,r=1-this._blur;n--;){var s,o=t[n],h=o.x,l=o.y,d=o.radius,u=Math.min(o.value,a),c=h-d,m=l-d,_=this.shadowCtx;this._templates[d]?s=this._templates[d]:this._templates[d]=s=e(d,r);var g=(u-i)/(a-i);_.globalAlpha=g<.01?.01:g,_.drawImage(s,c,m),c<this._renderBoundaries[0]&&(this._renderBoundaries[0]=c),m<this._renderBoundaries[1]&&(this._renderBoundaries[1]=m),c+2*d>this._renderBoundaries[2]&&(this._renderBoundaries[2]=c+2*d),m+2*d>this._renderBoundaries[3]&&(this._renderBoundaries[3]=m+2*d)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,a=this._renderBoundaries[3]-e,n=this._width,r=this._height,s=this._opacity,o=this._maxOpacity,h=this._minOpacity,l=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+i>n&&(i=n-t),e+a>r&&(a=r-e);for(var d=this.shadowCtx.getImageData(t,e,i,a),u=d.data,c=u.length,m=this._palette,_=3;_<c;_+=4){var g,f=u[_],p=4*f;p&&(g=s>0?s:f<o?f<h?h:f:o,u[_-3]=m[p],u[_-2]=m[p+1],u[_-1]=m[p+2],u[_]=l?m[p+3]:g)}d.data=u,this.ctx.putImageData(d,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],i=this._max,a=this._min;return Math.abs(i-a)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},i}(),n=(t=!1,"canvas2d"===e.defaultRenderer&&(t=a),t),r=function(){for(var t={},e=arguments.length,i=0;i<e;i++){var a=arguments[i];for(var n in a)t[n]=a[n]}return t},s=function(){var t=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,i){var a=this.cStore;a[t]||(a[t]=[]),a[t].push((function(t){return e.call(i,t)}))},emit:function(t,e){var i=this.cStore;if(i[t])for(var a=i[t].length,n=0;n<a;n++)(0,i[t][n])(e)}},t}(),a=function(t){var e=t._renderer,i=t._coordinator,a=t._store;i.on("renderpartial",e.renderPartial,e),i.on("renderall",e.renderAll,e),i.on("extremachange",(function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})})),a.setCoordinator(i)};function s(){var s=this._config=r(e,arguments[0]||{});if(this._coordinator=new t,s.plugin){var o=s.plugin;if(!e.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var h=e.plugins[o];this._renderer=new h.renderer(s),this._store=new h.store(s)}else this._renderer=new n(s),this._store=new i(s);a(this)}return s.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=r(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},s}();return{create:function(t){return new s(t)},register:function(t,i){e.plugins[t]=i}}},t.exports?t.exports=r():void 0===(n="function"==typeof(a=r)?a.call(e,i,e,t):a)||(t.exports=n)}}]);